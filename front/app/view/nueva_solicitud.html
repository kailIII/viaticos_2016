<div class="menuActivo">
	<div class="collapse navbar-collapse">
		<ul class="nav navbar-nav">
			<button (click)="OnbotonAtras()">Atrás</button>
		</ul>
		<ul class="nav navbar-nav navbar-right">
			<p>Módulo actual: <span>{{titulo}}</span></p>
		</ul>
	</div>
</div>
<div class="FormularioActivo">
	<form #ComisionForm="ngForm">
		<div class="panel-group" id="accordion1">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#datosGenerales">
							Sección: DATOS GENERALES
						</a>
					</h4>
				</div>
				<div id="datosGenerales" class="panel-collapse collapse">
					<div class="panel-body">
						<div class="td2">
							<td>Fecha Solicitud:</td>
							<td>
								<input type="date" id="Fecha_sol" step="1" [(ngModel)]="Fecha_sol" [ngModelOptions]="{standalone: true}">
							</td>
							<!-- <input type="date" id="Fecha_sol" step="1" min="2017-07-24" max="2017-08-08" [(ngModel)]="Fecha_sol" [ngModelOptions]="{standalone: true}"> -->
						</div>
						<table id="mytable" class="table2">
							<tbody>
								<tr>
									<td class="td2">Fecha Inicio:</td>
									<td class="td2">
										<input type="date" id="FechaDesde_solicitud" [(ngModel)]="FechaDesde_solicitud" [ngModelOptions]="{standalone: true}">
									</td>
									<td class="td2">Hora Inicio:</td>
									<td class="td2">
										<input type="time" id="HoraDesde_sol" [(ngModel)]="HoraDesde_sol" [ngModelOptions]="{standalone: true}">
									</td>
									<td>-</td> 
									<td class="td2">Fecha Fin:</td>
									<td class="td2">
										<input type="date" id="FechaHasta_solicitud" [(ngModel)]="FechaHasta_solicitud" [ngModelOptions]="{standalone: true}">
									</td>
									<td class="td2">Hora Fin:</td>
									<td class="td2">
										<input type="time" id="HoraHasta_sol" [(ngModel)]="HoraHasta_sol" [ngModelOptions]="{standalone: true}">
									</td>
								</tr>
							</tbody>
						</table>
						<table id="mytable" class="table2">
							<thead>
								<p><ins>Lugares de Comisión</ins></p>
							</thead>
							<tbody>
								<tr>
									<td class="td2">
										<form>
											<p-multiSelect id="ingresarCiudad" [options]="ciudad" [(ngModel)]="ciudades_sol_ini" [ngModelOptions]="{standalone: true}" dataType="string"></p-multiSelect>
										</form> 
									</td>
								</tr>
							</tbody>
						</table>
						<table id="mytable" class="table2">
							<thead>
								<p><ins>Comisionados</ins></p>
							</thead>
							<tbody>
								<tr>
									<td class="td2">
										<form>
											<p-multiSelect id="ingresarComisionado" [options]="persona" [(ngModel)]="funcionarios_sol_ini" [ngModelOptions]="{standalone: true}" dataType="string"></p-multiSelect>
										</form> 
									</td>
								</tr>
							</tbody>
						</table> 
		<!-- 				<thead>
								<p><ins>Actividades a Realizar</ins></p>
							</thead>
						<table id="mytable" class="table2">
							<tbody>
								<tr>
									<td>
										<p-editor id="editor" [(ngModel)]="comision.actividadessol" [style]="{'height':'320px'}" [ngModelOptions]="{standalone: true}">
											<header>
												<span class="ql-formats" style="text-align: center; width: 100%;">
													<table id="tabla_toolbar">
														<tr>
															<td>Estilo</td>
														</tr>
														<tr>
															<td>
																<span class="ql-formats">
																	<button class="ql-bold"></button>
																	<button class="ql-italic"></button>
																	<button class="ql-underline"></button>
																</span>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Tamaño</td>
														</tr>
														<tr>
															<td>
																<select class="ql-size">
																	<option selected></option>
																	<option value="large">Titulo</option>
																</select>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Alineación</td>
														</tr>
														<tr>
															<td style="text-align: center;">
																<span class="ql-formats">
																	<button class="ql-align"></button>
																	<button class="ql-align " value="center"></button>
																	<button class="ql-align" value="justify"></button>
																</span>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Ordenamiento</td>
														</tr>
														<tr>
															<td style="text-align: center;">
																<span class="ql-formats">
																	<button class="ql-list" value="bullet"></button>
																	<button class="ql-indent" value="-1"></button>
																	<button class="ql-indent" value="+1"></button>
																</span>
															</td>
														</tr>
													</table>
												</span>
											</header>
										</p-editor>
									</td>
								</tr>
							</tbody>
						</table>  -->
					</div>
				</div>
			</div>
		</div>
		<div class="panel-group" id="accordion2">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#actividadesRealizar"  >
							Sección: ACTIVIDADES A REALIZAR 
						</a>
					</h4>
				</div>
				<div id="actividadesRealizar" class="panel-collapse collapse">
					<div class="panel-body">
						<table id="mytable" class="table2">
							<tbody>
								<tr>
									<td>
										<p-editor id="editor" [(ngModel)]="comision.actividadessol" [style]="{'height':'320px'}" [ngModelOptions]="{standalone: true}">
											<header>
												<span class="ql-formats" style="text-align: center; width: 100%;">
													<table id="tabla_toolbar">
														<tr>
															<td>Estilo</td>
														</tr>
														<tr>
															<td>
																<span class="ql-formats">
																	<button class="ql-bold"></button>
																	<button class="ql-italic"></button>
																	<button class="ql-underline"></button>
																</span>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Tamaño</td>
														</tr>
														<tr>
															<td>
																<select class="ql-size">
																	<option selected></option>
																	<option value="large">Titulo</option>
																</select>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Alineación</td>
														</tr>
														<tr>
															<td style="text-align: center;">
																<span class="ql-formats">
																	<button class="ql-align"></button>
																	<button class="ql-align " value="center"></button>
																	<button class="ql-align" value="justify"></button>
																</span>
															</td>
														</tr>
													</table>
													<table id="tabla_toolbar">
														<tr>
															<td>Ordenamiento</td>
														</tr>
														<tr>
															<td style="text-align: center;">
																<span class="ql-formats">
																	<button class="ql-list" value="bullet"></button>
																	<button class="ql-indent" value="-1"></button>
																	<button class="ql-indent" value="+1"></button>
																</span>
															</td>
														</tr>
													</table>
												</span>
											</header>
										</p-editor>
									</td>
								</tr>
							</tbody>
						</table> 
					</div>
				</div>
			</div>
		</div>
		<div class="panel-group" id="accordion3">
			<div class="panel panel-default">
				<div class="panel-heading">
					<h4 class="panel-title">
						<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#transporteSolicitar" (click)="datosGenerales()">
							Sección: TRANSPORTES A SOLICITAR
						</a>
					</h4>
				</div>
				<div class="notificacionCiudad">
					
				</div>
				<div *ngIf="existenDatosGenerales == true">
					<div id="transporteSolicitar" class="panel-collapse collapse">
						<div class="panel-body">
							<table class="table table-striped">
								<thead>
									<tr>
										<th style="width: 10%">Tipo
										</th>
										<th style="width: 10%">Modelo
										</th>
										<th style="width: 20%">Ruta Inicio
										</th>
										<th style="width: 20%">Ruta Fin
										</th>
										<th style="width: 10%">Fecha Inicio
										</th>
										<th style="width: 7%">Hora Inicio
										</th>
										<th style="width: 10%">Fecha Fin
										</th>
										<th style="width: 7%">Hora Fin
										</th>
										<th style="width: 6%">Ingresar
										</th>
									</tr>
								</thead>
								<tbody id="tbody_trareq">
									<tr>
										<td style="width: 11.25%">
											<select id="combo_tiptra" (change)="onSelect()">
												<option [value]="0">Escoja uno</option>
												<option *ngFor="let tipodetransporte of tipotra" [value]="tipodetransporte.val">
													{{tipodetransporte.name}}
												</option>
											</select>
										</td>
										<td style="width: 11.25%">
											<select id="combo_vehiculo" *ngIf="modeltrans == false" >
												<option [value]="0">Escoja uno</option>
											</select> 
											<select id="combo_vehiculo" *ngIf="modeltrans == true" >
												<option *ngFor="let modelotransporte of modeltra" [value]="modelotransporte.tiptraNombre">
													{{modelotransporte.tiptraNombre}}
												</option>
											</select> 
										</td>
										<td style="width: 11.25%">
											<p-dropdown id="RinicioTrans" [style]="{'width':'auto'}" [options]="ciudadtra" [(ngModel)]="RinicioTrans" [filter]="true" [ngModelOptions]="{standalone: true}">
											</p-dropdown>
										</td>
										<td style="width: 11.25%">
											<p-dropdown [style]="{'width':'auto'}" [options]="ciudadtra" [(ngModel)]="RfinTrans" [filter]="true" [ngModelOptions]="{standalone: true}">
												<div class="ui-helper-clearfix" style="position: relative;height: 12px;">
													<div id="RfinTrans" style="font-size:10px;float:right;margin-top:1px">{{ciudadtra.label}}</div>
												</div>
											</p-dropdown>
										</td>
										<td>
											<input type="date" [(ngModel)]="FinicioTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="time" [(ngModel)]="HinicioTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="date" [(ngModel)]="FfinTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="time" [(ngModel)]="HfinTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td  style="width: 10%">
											<a class="btn btn-success btn-xs glyphicon glyphicon-plus" (click)="OnAgregarTraReq()">
											</a>
										</td>
									</tr>
								</tbody>
							</table>
							<!-- <div class="AdvertenciaRuta"> -->
					<!-- <table class="table table-striped">
								<thead>
									<tr>
										<th style="width: 10%">Tipo
										</th>
										<th style="width: 10%">Modelo
										</th>
										<th style="width: 20%">Ruta Inicio
										</th>
										<th style="width: 20%">Ruta Fin
										</th>
										<th style="width: 10%">Fecha Inicio
										</th>
										<th style="width: 7%">Hora Inicio
										</th>
										<th style="width: 10%">Fecha Fin
										</th>
										<th style="width: 7%">Hora Fin
										</th>
										<th style="width: 6%">Agregar Ruta
										</th>
									</tr>
								</thead>
								<tbody id="tbody_trareq_warning">
									<tr>
										<td style="width: 11.25%">
											<select id="combo_tiptra" (change)="onSelect()">
												<option *ngFor="let tipodetransporte of tipotra" [value]="tipodetransporte.val">
													{{tipodetransporte.name}}
												</option>
											</select>
										</td>
										
										<td style="width: 11.25%">
											<select id="combo_vehiculo" *ngIf="modeltrans == false" >
											</select> 
											<select id="combo_vehiculo" *ngIf="modeltrans == true" >
												<option *ngFor="let modelotransporte of modeltra" [value]="modelotransporte.tiptraNombre">
													{{modelotransporte.tiptraNombre}}
												</option>
											</select> 
										</td>
										
										<td style="width: 11.25%">
											<p-dropdown id="AdvertenciaRinicioTrans" [style]="{'width':'auto'}" [options]="ciudadtra" [(ngModel)]="AdvertenciaRinicioTrans" [filter]="true" [ngModelOptions]="{standalone: true}">
											</p-dropdown>
										</td>
										
										<td style="width: 11.25%">
											<p-dropdown [style]="{'width':'auto'}" [options]="ciudadtra" [(ngModel)]="AdvertenciaRfinTrans" [filter]="true" [ngModelOptions]="{standalone: true}">
												<div class="ui-helper-clearfix" style="position: relative;height: 12px;">
													<div id="RfinTrans" style="font-size:10px;float:right;margin-top:1px">{{ciudadtra.label}}</div>
												</div>
											</p-dropdown>
										</td>
										<td>
											<input type="date" [(ngModel)]="AdvertenciaRFinTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="date" [(ngModel)]="AdvertenciaFinicioTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="time" [(ngModel)]="AdvertenciaHinicioTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="date" [(ngModel)]="AdvertenciaFfinTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td>
											<input type="time" [(ngModel)]="AdvertenciaHfinTrans" [ngModelOptions]="{standalone: true}">
										</td>
										<td  style="width: 10%">
											<a class="btn btn-success btn-xs glyphicon glyphicon-plus" (click)="OnAgregarTraWar()">
											</a>
										</td>
									</tr>
								</tbody>
							</table> -->
				<!-- </div> -->
				<!-- <br> -->
							<div class="ui-widget-header" style="padding:4px 10px;border-bottom: 0 none; text-align: right;">
								<i class="fa fa-search" style="margin:4px 4px 0 0"></i>
								<input #gb1 type="text" pInputText size="25" placeholder="Buscar">
							</div>
						<!-- 	<p-dataTable id="tbody_trareq_dialog" [value]="transporteSol" [rows]="5" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]" [globalFilter]="gb1" [editable]="true">
								<p-column [style]="{'width':'11.25%'}" field="tratipo" header="Tipo" [ordered]="true" [sortable]="false" ></p-column>
								<p-column [style]="{'width':'11.25%'}" field="tramodelo" dateformat="yyyy-MM-dd" header="Modelo"  [sortable]="false"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trarutaInicio" header="Ruta Inicio" [sortable]="false"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trarutaFin" header="Ruta Fin" [sortable]="false"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trafechaInicio" header="Fecha Inicio" [sortable]="false">
								</p-column>
								<p-column [style]="{'width':'11.25%'}" field="trahoraInicio" header="Hora Inicio" [sortable]="false"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trafechaFin" header="Fecha Fin" [sortable]="false"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trahoraFin" header="Hora Fin" [sortable]="false"></p-column>
								<p-column [style]="{'width':'10%'}" styleClass="col-button" header="Eliminar">
									<template let-car="rowData" pTemplate="body">
										<button type="button" pButton (click)="delete(car)" icon="fa-trash" data-toggle="tooltip" data-placement="bottom" title="Eliminar"></button>
									</template>
								</p-column>
							</p-dataTable> -->
							<p-dataTable id="tbody_trareq_dialog" [value]="transporteSol" [rows]="5" [paginator]="true" [pageLinks]="3" [rowsPerPageOptions]="[5,10,20]" [globalFilter]="gb1" [rowStyleClass]="mensajeTransporte">
								<p-column [style]="{'width':'11.25%'}" field="tratipo" header="Tipo"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="tramodelo" dateformat="yyyy-MM-dd" header="Modelo"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trarutaInicio" header="Ruta Inicio"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trarutaFin" header="Ruta Fin"></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trafechaInicio" header="Fecha Inicio">
								</p-column>
								<p-column [style]="{'width':'11.25%'}" field="trahoraInicio" header="Hora Inicio" ></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trafechaFin" header="Fecha Fin" ></p-column>
								<p-column [style]="{'width':'11.25%'}" field="trahoraFin" header="Hora Fin" ></p-column>
								<p-column [style]="{'width':'11.25%'}" field="estado" header="Estado" >
									<!-- <template let-car="rowData" pTemplate="body">
									<div *ngIf = "this.transporteSol.estado === 'ERROR'">
										<img src="assets/images/ImgCritical.png"  width="16" height="16" />
									</div>
									<div *ngIf = "this.transporteSol.estado === 'BIEN'">
										<img src="assets/images/ok.png"  width="16" height="16" />									
									</div>
									</template> -->
								</p-column>
								<p-column [style]="{'width':'10%'}" styleClass="col-button" header="Acciones">
									<template let-car="rowData" pTemplate="body">
									<!-- <div *ngIf = "OpcBien"> -->
									<div *ngIf = "car.estado === 'BIEN'">
										<button type="button" pButton (click)="borrarruta(car)" icon="fa-trash" data-toggle="tooltip" data-placement="bottom" title="Eliminar"></button>
									</div>
									<!-- <div *ngIf = "OpcWarning"> -->
									<div *ngIf = "car.estado === 'ERROR'">
										<button type="button" pButton (click)="myModalRutas.open()" icon="fa-check" data-toggle="tooltip" data-placement="bottom" title="Aceptar"></button>
										<!-- <p>{{car.estado}}</p> -->
										<button type="button" pButton (click)="editarruta(car)" icon="fa-pencil-square-o" data-toggle="tooltip" data-placement="bottom" title="Editar"></button>
									</div>
									</template>
								</p-column>
							</p-dataTable>
						</div>
					</div>
				</div>
			</div>
		</div>
		<modal #myModalRutas>
	<modal-header>
		<h5>INFORMACION DE LA RUTA</h5> <!-- <h2>{{detalleSolicitudRealizadas.DetsolIdsolicitud}}</h2> -->
	</modal-header>
	<modal-content>
	<p>LA ruta se encuentra con errores, Si acepta se modificaran las horas, caso contrario presione CERRAR y edite las rutas</p>
	</modal-content>
	<modal-footer>
		<button class="btn btn-primary" (click)="aceptarruta();myModalRutas.close()">Aceptar</button>
		<button class="btn btn-primary" (click)="myModalRutas.close()">Cerrar</button>

	</modal-footer>
</modal>

		<modal #myModal [hideCloseButton]="true" [closeOnEscape]="false" [closeOnOutsideClick]="false"  modalClass="modal-sm">
			<modal-content>
				<div *ngIf="mensajeGuardado == 'false'" class="cargarSol">
					<div class="mensajecargaSol">
						<p>Por favor espere un momento, se esta guardando la solicitud</p>
						<div>
							<img src="assets/images/cargar.gif"/>
						</div>
					</div>
					<!-- <img src="assets/images/cargar.gif"  width="32" height="32" /> -->
				</div>
				<div *ngIf="mensajeGuardado === 'true'"  class="cargarSol">
					<div class="mensajecargaSol">
						<p>Solicitud creada correctamente</p>
						<div>
							<img src="assets/images/visto-verde.png"/>
						</div>
					</div>
				</div>
				<div *ngIf="mensajeGuardado === 'error'"  class="cargarSol">
					<div class="mensajecargaSol">
						<p>Solicitud con errores, por favor verifique los datos ingresados e intente nuevamente</p>
						<div>
							<img src="assets/images/ImgCritical.png"/>
						</div>
					</div>
				</div>
			</modal-content>
			<modal-footer>
				<div *ngIf="mensajeGuardado === 'true'"  class="cargarSol">
					<button class="btn btn-primary" (click)="myModal.close();OnEnviaraRaizSolicitud()">Aceptar</button>
				</div>
				<div *ngIf="mensajeGuardado === 'error'"  class="cargarSol">
					<button class="btn btn-primary" (click)="myModal.close()">Aceptar</button>
				</div>
			</modal-footer>
		</modal>
		<div >
			<ul class="pagination pull-CENTER">
				<button class="btn btn-primary" type="button" pButton (click)="myModal.open();onGuardarSol()" label="GUARDAR Y ENVIAR"></button>
				<button (click)="OnOrdernarTransporte()">Ordenar Transporte</button>
				<button (click)="OnCancelarSol()">NO GUARDAR Y SALIR</button>
			</ul>
		</div>
	</form>
</div>